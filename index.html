<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IlTrovaClienti</title>
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="style.css?v=2.3.2">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script defer src="firebase-init.js"></script>
  <script defer src="script.js?v=2.3.2"></script>
</head>
<body>
  <header class="topbar">
    <h1>IlTrovaClienti</h1>
    <div class="credit-box">
      Crediti: <span id="crediti">0</span> (€<span id="euroCrediti">0</span>)
      <button id="btnRicarica" class="btn btn-yellow small">Ricarica</button>
      <button id="btnLogin"   class="btn btn-blue small">Login</button>
      <button id="btnLogout"  class="btn btn-grey small hidden">Logout</button>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab btn-green active" data-filter="all">Tutti</button>
    <button class="tab btn-blue"         data-filter="lead">Lead da chiamare</button>
    <button class="tab btn-pink"         data-filter="app">Appuntamenti fissati</button>
    <button class="tab btn-yellow"       data-filter="contr">Contratti riservati</button>
  </nav>

  <section class="filters">
    <select id="regioneFilter"></select>
    <select id="cittaFilter"></select>
    <select id="categoriaFilter"></select>
    <select id="tipoFilter"></select>
  </section>

  <main id="cards" class="cards"></main>

  <aside id="cart">
    <h2>Carrello</h2>
    <ul id="cartList"></ul>
    <p>Totale crediti: <span id="cartTotal">0</span></p>
  </aside>

  <!-- Login Modal -->
  <div id="loginMask" class="modal-mask hidden"></div>
  <div id="loginModal" class="modal hidden">
    <h3>Login / Registrazione</h3>
    <input id="loginEmail"    type="email"    placeholder="Email">
    <input id="loginPassword" type="password" placeholder="Password">
    <button id="doLogin"      class="btn btn-blue full">Login</button>
    <button id="doSignup"     class="btn btn-green full">Registrati</button>
    <button id="closeLogin"   class="btn btn-grey small">Chiudi</button>
  </div>

  <!-- Pay Modal -->
  <div id="payMask" class="modal-mask hidden"></div>
  <div id="payModal" class="modal hidden">
    <h3>Crediti insufficienti</h3>
    <button id="payRevolut" class="btn btn-blue full">Carta (Revolut)</button>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
      <input type="hidden" name="cmd" value="_s-xclick">
      <input type="hidden" name="hosted_button_id" value="YOUR_BUTTON_ID">
      <button class="btn btn-yellow full" type="submit">PayPal</button>
    </form>
    <button id="showIban" class="btn btn-green full">Bonifico bancario</button>
    <div id="ibanBox" class="hidden">
      <p><b>Beneficiario:</b> Cristian Di Bella</p>
      <p><b>IBAN:</b> LT67 3250 0328 0923 7250</p>
      <p><b>BIC/SWIFT:</b> REVOLT21</p>
      <p><b>Banca:</b> Revolut Bank UAB – Konstitucijos ave. 21B, Vilnius</p>
    </div>
    <button id="closePay" class="btn btn-grey small">Chiudi</button>
  </div>

  <!-- Reserve Modal -->
  <div id="resMask" class="modal-mask hidden"></div>
  <div id="resModal" class="modal hidden">
    <h3>Riserva Contratto</h3>
    <input id="resName"   type="text" placeholder="Nome e Cognome">
    <input id="resPhone"  type="text" placeholder="Telefono">
    <input id="resLoc"    type="text" placeholder="Località">
    <input id="resEmail"  type="email" placeholder="Email">
    <textarea id="resMsg" placeholder="Messaggio libero"></textarea>
    <button id="doReserve" class="btn btn-pink full">Invia Richiesta</button>
    <button id="closeRes"   class="btn btn-grey small">Chiudi</button>
  </div>
</body>
</html>
